{% import 'ngxlib.j2' as ngx with context -%}

{{ ngx.bulk_directives(ngx_settings.main | default({})) }}

{% for context in ['events', 'http'] %}
{{
  ngx.block(
    context,
    ngx.bulk_directives(
      ngx_settings[context] | default({})
    )
  )
}}{{ loop.last | ternary('', '\n') }}
{% endfor %}
